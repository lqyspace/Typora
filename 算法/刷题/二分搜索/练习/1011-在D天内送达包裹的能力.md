# 1011-在D天内送达包裹的能力

[1011-在D天内送达包裹的能力](https://leetcode.cn/problems/capacity-to-ship-packages-within-d-days/description/)，难度中等

延伸：这道题和力扣 410、1011、1482、1552、1760、2187、2226 属于同一类题

![image-20230822203418547](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202308222034635.png)

分析：

- 船的荷载能力与运输的天数具有单调性，成反相关
- 确定船的最小荷载能力，因为船至少一天载一个包裹，所以船的最小荷载能力为数组最大值
- 确定船的最大荷载能力，即船可以在一天之内把所有的包裹运走，所以船的最大荷载能力为weights元素的和，极端情况下为：$500 \times 5 \times 10^4$

自己代码如下：

```java
class Solution {
    public int shipWithinDays(int[] weights, int days) {
        // 船的最小核载量等于数组最大值，因为船至少得能拉一个包裹的重量
        // 注意，最大的核载量不是500，应该是weights的和，极端情况下应该是500 * 5 * 10^4 +1
        // 这个right的值也可以是weight数组的和
        int left = maxNum(weights), right = 500 * 5 * 10000 + 1;

        while(left < right){
            int mid = left + (right - left)/2;
            if(f(weights, mid) <= days){
                right = mid;
            } else {
                left = mid+1;
            }
        }
        return left;
    }

    // 船的核载量与天数具有单调关系
    private int f(int[] weights, int k){// k是核载量
        int days = 0;
        long tmp = 0;
        // 这个地方需要注意：
        // 如果k足够大的话，那么tmp的最大值为((1+5x10^4)x5x10^4)/2 = 2.5x10^9, 这个数会超int的最大值，所以tmp得用long
        for(int i=0; i<weights.length; i++){
            if(tmp+weights[i] <= k){
                tmp += weights[i];
            }else{
                // 函数的返回值是天数days
                // 极端情况下，days的最大值为 5x10^4， 可以用int类型
                // 因为船至少的能拉一个包裹的重量
                days++;
                tmp = weights[i];
            }
        }
        // 如果tmp==0，那么最后一个包裹不用运走
        if(tmp>0) days++;
        return days;
    }

    // 求最大值
    private int maxNum(int[] weights){
        int res = -1;
        for(int w: weights)
            res = Math.max(res, w);
        return res;
    }
}
```

