# 18-四数之和

[18-四数之和](https://leetcode.cn/problems/4sum/)，难度中等

![image-20230904141228643](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202309041412697.png)

题解：

- 注意整型溢出
- 双指针+排序
- 元素不能重复，不是索引不能重复

```java
class Solution {
    public List<List<Integer>> fourSum(int[] nums, int target) {
        // 一定要先排序
        Arrays.sort(nums);
        return nSum(nums, 4, 0, target);
    }

    public List<List<Integer>> nSum(int[] nums, int n, int start, long target){
        int sz = nums.length;
        List<List<Integer>> res = new ArrayList<>();
        if(n<2 || sz<n) return res;
        
        if(n==2){
            int left=start, right = sz-1;
            while(left<right){
                int lv = nums[left], rv = nums[right];
                int s = lv + rv;
                if(s<target){
                    while(left<right && nums[left]==lv)left++;
                }else if(s>target){
                    while(left<right && nums[right]==rv)right--;
                }else{
                    res.add(Arrays.asList(nums[left], nums[right]));
                    while(left<right && nums[left]==lv)left++;
                    while(left<right && nums[right]==rv)right--;
                }
            }
        } else{
            for(int i=start; i<sz; i++){
                List<List<Integer>> tuples = nSum(nums, n-1, i+1, target-nums[i]);
                for(List<Integer> tuple: tuples){
                    List<Integer> t = new ArrayList<>(tuple);
                    t.add(nums[i]);
                    res.add(t);
                }
                while(i<sz-1 && nums[i]==nums[i+1])i++
            }
        }
        return res;
    }
}
```

