# 921-使括号有效的最少添加

[921-使括号有效的最少添加](https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/description/)，难度中等

![image-20230902113828380](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202309021138462.png)

题解：根据《如何解决括号相关问题》的解题模板，可以由两种解法：

因为只涉及到一种类型的括号，所以可以由两种解法，第一种解法不用栈：

```java
class Solution {
    public int minAddToMakeValid(String s) {
        if(s==null) return 0;
        int need = 0;// 对于每一个左括号，所需要的右括号的数量
        int res = 0;// 一共的操作次数
        for(char c: s.toCharArray()){
            if(c=='('){
                need++;
            }else {
                need--;
                if(need==-1){// 说明此时截止到右括号以前，都能正常匹配。现在先遇到了右括号，为了保证顺序一致，必须需要一个左括号
                res++;
                need=0;// 匹配了一个左括号之后，所需要的有括号数量为0
                }
            }
        }
        // 最终的结果为他两的求和，因为need表示所需要的有括号数量
        return res+need;
    }
}
```

第二种解法用栈：

```java
class Solution {
    public int minAddToMakeValid(String s) {
        if(s==null) return 0;
        Stack<Character> left = new Stack();// 记录左括号
        int res = 0;// 记录操作次数
        for(char c: s.toCharArray()){
            if(c=='('){
                left.push(c);
            } else {
                if(!left.isEmpty()){// 判断站是否为空
                    left.pop();
                } else {
                    // 如果遇到了右括号，但此时栈为空，说明此时需要一个左括号
                    res++;
                }
            }
        }
        // 最终的结果：res+栈中左括号的数量
        return res+left.size();
    }
}
```

