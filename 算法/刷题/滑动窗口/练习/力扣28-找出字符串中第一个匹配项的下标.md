# 找出字符串中第一个匹配项的下标

[力扣28-找出字符串中第一个匹配项的下标](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/)，难度简单

![image-20230821151241833](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202308211512891.png)

滑动窗口的延伸解法：

```java
class Solution {
    public int strStr(String haystack, String needle) {
        // 位数
        int L = needle.length();
        // 进制
        int R = 26;
        // 素数
        long Q = 1658598167;
        // R^(L -1)
        long RL = 1;
        for(int i=1; i<=L-1; i++){
            RL = (RL * R) % Q;
        }

        // 计算一下模式串哈希
        long needleHash = 0;
        for(int i=0; i<needle.length(); i++){
            needleHash = ((needleHash * R)%Q + needle.charAt(i)) % Q;
        }

        long windowHash = 0;
        int left = 0, right = 0;
        while(right < haystack.length()){
            windowHash = ((windowHash * R) % Q + haystack.charAt(right++)) % Q;

            if(right - left == L){
                if(windowHash == needleHash){
                    if(needle.equals(haystack.substring(left, right)))
                        return left;
                }

                windowHash = (windowHash - (haystack.charAt(left) * RL)%Q + Q) % Q;
                left++;
            }
        }
        return -1;
    }
}
```

注意：有几个变量是`long`类型，一定要注意，都错误提交了好几遍了。