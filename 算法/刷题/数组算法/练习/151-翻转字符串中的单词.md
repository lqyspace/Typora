# 151-翻转字符串中的单词

[151-翻转字符串中的单词](https://leetcode.cn/problems/reverse-words-in-a-string/description/)，难度中等

![image-20230819164513599](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202308200933423.png)

解法一：暴力

```java
class Solution {
    public String reverseWords(String s) {
		// 去除前导空格和尾随空格
        s = s.trim();
        // 替换空格
        s = s.replaceAll(" +", " ");
        // 以空格分割
        String[] ss = s.split("\\s+");
        StringBuilder sb = new StringBuilder();
        for(int i=ss.length-1; i>=0; i--)
            sb.append(ss[i]).append(" ");
        return sb.toString().trim();
    }
}
```



进阶解法：先翻转整个字符串，然后分别翻转每个单词

解法二：对于字符串不可变的情况，首先得把字符串变为可变的数据结构，同时在转化的过程中去除空格。

```java
class Solution {
    public String reverseWords(String s) {
		StringBuilder sb = trimSpaces(s);
        
        // 翻转整个字符串
        reverse(sb, 0, sb.length()-1);
        
        // 翻转单个单词
        reverseEachWord(sb);
        
        return sb.toString();
        
    }
    
    public StringBuilder trimSpaces(String s){
        int left = 0, right = s.length() - 1;
        // 去掉字符串开头的空白字符
        while(left<=right && s.charAt(left) == ' '){
            ++left;
        }
        
        // 去掉字符串末尾的空白字符
        while(left<=right && s.charAt(right)==' '){
            --right;
        }
        
        // 将字符串间的多余字符串去除
        StringBuilder sb = new StringBuilder();
        while(left <= right){
            char c = s.charAt(left);
            if(c != ' ')
                sb.append(c);
            else if(sb.charAt(sb.length() - 1) != ' ')
                sb.append(c);
            
            left++;
        }
        
        return sb;
    }
    
    // 翻转指定区域的字符串
    public void reverse(StringBuilder sb, int left, int right){
        while(left<=right){
            char tmp = sb.charAt(left);
            sb.setCharAt(left++, sb.charAt(right));
            sb.setCharAt(right--, tmp);
        }
    }
    
    
    // 翻转每个单词
    public void reverseEachWord(StringBuilder sb){
        int n = sb.length();
        int start = 0, end = 0;
        
        while(start<n){
            // 循环至单词末尾
            while(end<n && sb.charAt(end)!=' ')
                ++end;
            // 翻转单词
            reverse(sb, start, end-1);
            // 更新start的位置
            start = end+1;
            ++end;
        }
    }
}
```

时间复杂度：$O(N)$

空间复杂度：$O(N)$

小结：对于字符串可变的语言，就不需要再额外开辟空间了，直接在字符串上原地实现，在这种情况下，翻转字符和去除空格可以一起完成。



解法三：

由于双端队列支持从队列头部插入的方法，因此我们可以沿着字符串一个一个单词处理，然后将单词压入队列的头部，再将队列转成字符串即可。

```java
class Solution{
    public String reverseWords(String s){
        int left = 0, right = s.length()-1;
        // 删除首端的空格
        while(left<=right && s.charAt(left)==' ')
            ++left;
        // 删除尾端的空格
        while(left<=right && s.charAt(right)==' '){
            --right;
        }
        
        Deque<String> q = new ArrayDeque<>();
        StringBuilder word = new StringBuilder();
        
        while(left<=right){
            char c = s.charAt(left);
            if(word.length()!=0 && c==' '){
                q.offerFirst(word.toString());
                word.setLength(0);
            } else if(c!=' ') {
                word.append(c);
            }
            left++;
        }
        q.offerFirst(word.toString());
        
        return String.join(" ", q);
        
    }
}
```

时间复杂度：$O(N)$

空间复杂度：$O(N)$