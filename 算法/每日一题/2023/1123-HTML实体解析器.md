# 1410-HTML实体解析器

[1410-HTML实体解析器](https://leetcode.cn/problems/html-entity-parser/description/?envType=daily-question&envId=2023-11-23)，难度中等

![image-20231125225025734](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202311252250842.png)

题解：**一次遍历**

本题要求把字符串中所有的**字符实体**替换成对应的字符。

**字符实体**都是由`&`开头的，所以我们只需要遍历一遍字符串，用一个变量`pos`来表示当前处理的位置，如果`text[pos]=&`，就在这个位置进行探测。假设一个字符实体为`e`，对应的字符为`c`，那么可以通过判断`pos`位置开始，长度和`e`相同的子串是否和`e`相等，如果相等就可以替换。

```java
class Solution {
    class EntityChar{
        String entity;
        char character;
        public EntityChar(String entity, char character){
            this.entity = entity;
            this.character = character;
        }
    }
    List<EntityChar> entityList = new ArrayList<>();
    public String entityParser(String text) {
        entityList.add(new EntityChar("&quot;", '"'));
        entityList.add(new EntityChar("&apos;", '\''));
        entityList.add(new EntityChar("&amp;", '&'));
        entityList.add(new EntityChar("&gt;", '>'));
        entityList.add(new EntityChar("&lt;", '<'));
        entityList.add(new EntityChar("&frasl;", '/'));
        StringBuilder sb = new StringBuilder();
        int len = text.length();
        int pos = 0;
        while(pos < len){
            boolean isEntity = false;
            if(text.charAt(pos)=='&'){
                for(EntityChar ec: entityList){
                    String e = ec.entity;
                    char c = ec.character;
                    if(pos+e.length()<=len && text.substring(pos, pos+e.length()).equals(e)){
                        sb.append(c);
                        pos += e.length();
                        isEntity = true;
                        break;
                    }
                }
            }
            if(!isEntity){
                sb.append(text.charAt(pos++));
            }
        }
        return sb.toString();
    }
}
```

题解：**一次遍历**

```java
class Solution {
    public String entityParser(String text) {
        Map<String, Character> map = new HashMap<>(){{
            put("&quot;", '"');
            put("&apos;", '\'');
            put("&amp;", '&');
            put("&gt;", '>');
            put("&lt;", '<');
            put("&frasl;", '/');
        }};
        int l = text.length();
        StringBuilder sb = new StringBuilder();
        int pos = 0;
        while(pos < l){
            if(text.charAt(pos)=='&'){
                int j = pos + 1;
                while(j<l && j-pos<6 && text.charAt(j)!=';') j++;
                String u = text.substring(pos, Math.min(j+1, l));
                if(map.containsKey(u)){
                    sb.append(map.get(u));
                    pos = j+1;
                    continue;
                }
            }
            sb.append(text.charAt(pos++));
        }
        return sb.toString();
    }
}
```

