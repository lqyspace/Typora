# 634-寻找数组的错位排列

[634-寻找数组的错位排列](https://leetcode.cn/problems/find-the-derangement-of-an-array/description/?envType=study-plan-v2&envId=meituan-2023-fall-sprint)，难度中等

![image-20230905013430766](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202309050134821.png)

![image-20230905013530168](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202309050135248.png)

![image-20230905013541997](https://raw.githubusercontent.com/lqyspace/mypic/master/PicBed/202309050135057.png)

```java
class Solution {
    public int findDerangement(int n) {
        // f(n) = (n-1)*(f(n-1) + f(n-2))
        if(n==1) return 0;
        long[] dp = new long[n+1];
        int M = 1000000007;
        dp[1] = 0; dp[2] = 1;
        for(int i=3; i<=n; i++){
            dp[i] = (i-1)*(dp[i-1] + dp[i-2]);
            dp[i] %= M;
        }
        return (int)dp[n];
    }
}
```

优化：

```java
class Solution {
    public int findDerangement(int n) {
        // f(n) = (n-1)*(f(n-1) + f(n-2))
        if(n==1) return 0;
        long[] dp = new long[n+1];
        int M = 1000000007;
        dp[1] = 0; dp[2] = 1;
        for(int i=3; i<=n; i++){
            dp[i] = (i-1)*(dp[i-1] + dp[i-2]);
            dp[i] %= M;
        }
        return (int)dp[n];
    }
}
```

