# å¦‚ä½•è§£å†³æ‹¬å·ç›¸å…³é—®é¢˜

è¯»å®Œæœ¬æ–‡ï¼Œä½ ä¸ä»…å­¦ä¼šäº†ç®—æ³•å¥—è·¯ï¼Œè¿˜å¯ä»¥é¡ºä¾¿è§£å†³å¦‚ä¸‹é¢˜ç›®ï¼š

|                           LeetCode                           |                             åŠ›æ‰£                             | éš¾åº¦ |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :--: |
| [1541. Minimum Insertions to Balance a Parentheses String](https://leetcode.com/problems/minimum-insertions-to-balance-a-parentheses-string/) | [1541. å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode.cn/problems/minimum-insertions-to-balance-a-parentheses-string/) |  ğŸŸ    |
| [20. Valid Parentheses](https://leetcode.com/problems/valid-parentheses/) | [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/) |  ğŸŸ¢   |
| [921. Minimum Add to Make Parentheses Valid](https://leetcode.com/problems/minimum-add-to-make-parentheses-valid/) | [921. ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ ](https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/) |  ğŸŸ    |

## åˆ¤æ–­æœ‰æ•ˆæ‹¬å·ä¸²

å¯¹æ‹¬å·çš„æœ‰æ•ˆæ€§åˆ¤æ–­å¤šæ¬¡åœ¨ç¬”è¯•ä¸­å‡ºç°ï¼Œç°å®ä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬å†™çš„ä»£ç ï¼Œç¼–è¾‘å™¨ä¼šæ£€æŸ¥æ‹¬å·æ˜¯å¦æ­£ç¡®é—­åˆã€‚è€Œä¸”æˆ‘ä»¬çš„ä»£ç å¯èƒ½ä¼šåŒ…å«ä¸‰ç§æ‹¬å· `[](){}`ï¼Œåˆ¤æ–­èµ·æ¥æœ‰ä¸€ç‚¹éš¾åº¦ã€‚

æ¥çœ‹ä¸€çœ‹åŠ›æ‰£ç¬¬ 20 é¢˜ã€Œ[æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/)ã€ï¼Œè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å« `[](){}` å…­ç§æ‹¬å·ï¼Œè¯·ä½ åˆ¤æ–­è¿™ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„æ‹¬å·æ˜¯å¦æœ‰æ•ˆã€‚

ä¸¾å‡ ä¸ªä¾‹å­ï¼š

```text
Input: "()[]{}"
Output: true

Input: "([)]"
Output: false

Input: "{[]}"
Output: true
```

è§£å†³è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆé™ä½éš¾åº¦ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œ**å¦‚æœåªæœ‰ä¸€ç§æ‹¬å· `()`**ï¼Œåº”è¯¥å¦‚ä½•åˆ¤æ–­å­—ç¬¦ä¸²ç»„æˆçš„æ‹¬å·æ˜¯å¦æœ‰æ•ˆå‘¢ï¼Ÿ

å‡è®¾å­—ç¬¦ä¸²ä¸­åªæœ‰åœ†æ‹¬å·ï¼Œå¦‚æœæƒ³è®©æ‹¬å·å­—ç¬¦ä¸²æœ‰æ•ˆï¼Œé‚£ä¹ˆå¿…é¡»åšåˆ°ï¼š

**æ¯ä¸ªå³æ‹¬å· `)` çš„å·¦è¾¹å¿…é¡»æœ‰ä¸€ä¸ªå·¦æ‹¬å· `(` å’Œå®ƒåŒ¹é…**ã€‚

æ¯”å¦‚è¯´å­—ç¬¦ä¸² `()))((` ä¸­ï¼Œä¸­é—´çš„ä¸¤ä¸ªå³æ‹¬å·**å·¦è¾¹**å°±æ²¡æœ‰å·¦æ‹¬å·åŒ¹é…ï¼Œæ‰€ä»¥è¿™ä¸ªæ‹¬å·ç»„åˆæ˜¯æ— æ•ˆçš„ã€‚

é‚£ä¹ˆæ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºç®—æ³•ï¼š

```java
/**
* ä¸€ä¸ªå­—ç¬¦ä¸²åˆæ³•æ‹¬å·å­—ç¬¦ä¸²çš„æ¡ä»¶:
* 1. å·¦å³æ‹¬å·æ•°é‡ç›¸ç­‰;
* 2. ä»»æ„ä¸€ä¸ªä½ç½®å·¦æ‹¬å·çš„æ•°é‡éƒ½å¤§äºç­‰äºå³æ‹¬å·çš„æ•°é‡ã€‚
*/

/**
 * å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ£€éªŒå­—ç¬¦ä¸²æ˜¯å¦ä¸ºåˆæ³•æ‹¬å·å­—ç¬¦ä¸²
 * @param str å¾…æ£€éªŒçš„å­—ç¬¦ä¸²
 * @return boolean ç±»å‹ï¼Œæ˜¯/å¦åˆæ³•æ‹¬å·å­—ç¬¦ä¸²
 */
boolean isValid(String str) {
    // å¾…åŒ¹é…çš„å·¦æ‹¬å·æ•°é‡
    int left = 0;
    for (int i = 0; i < str.length(); i++) {
        if (str.charAt(i) == '(') {
            left++;
        } else {
            // é‡åˆ°å³æ‹¬å·
            left--;
        }

        // å³æ‹¬å·å¤ªå¤š
        if (left == -1)
            return false;
    }
    // æ˜¯å¦æ‰€æœ‰çš„å·¦æ‹¬å·éƒ½è¢«åŒ¹é…äº†
    return left == 0;
}
```

å¦‚æœåªæœ‰åœ†æ‹¬å·ï¼Œè¿™æ ·å°±èƒ½æ­£ç¡®åˆ¤æ–­æœ‰æ•ˆæ€§ã€‚å¯¹äºä¸‰ç§æ‹¬å·çš„æƒ…å†µï¼Œæˆ‘ä¸€å¼€å§‹æƒ³æ¨¡ä»¿è¿™ä¸ªæ€è·¯ï¼Œå®šä¹‰ä¸‰ä¸ªå˜é‡ `left1`ï¼Œ`left2`ï¼Œ`left3` åˆ†åˆ«å¤„ç†æ¯ç§æ‹¬å·ï¼Œè™½ç„¶è¦å¤šå†™ä¸å°‘ if else åˆ†æ”¯ï¼Œä½†æ˜¯ä¼¼ä¹å¯ä»¥è§£å†³é—®é¢˜ã€‚

ä½†å®é™…ä¸Šç›´æ¥ç…§æ¬è¿™ç§æ€è·¯æ˜¯ä¸è¡Œçš„ï¼Œæ¯”å¦‚è¯´åªæœ‰ä¸€ä¸ªæ‹¬å·çš„æƒ…å†µä¸‹ `(())` æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯å¤šç§æ‹¬å·çš„æƒ…å†µä¸‹ï¼Œ `[(])` æ˜¾ç„¶æ˜¯æ— æ•ˆçš„ã€‚

ä»…ä»…è®°å½•æ¯ç§å·¦æ‹¬å·å‡ºç°çš„æ¬¡æ•°å·²ç»ä¸èƒ½åšå‡ºæ­£ç¡®åˆ¤æ–­äº†ï¼Œæˆ‘ä»¬è¦åŠ å¤§å­˜å‚¨çš„ä¿¡æ¯é‡ï¼Œå¯ä»¥åˆ©ç”¨æ ˆæ¥æ¨¡ä»¿ç±»ä¼¼çš„æ€è·¯ã€‚æ ˆæ˜¯ä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ï¼Œå¤„ç†æ‹¬å·é—®é¢˜çš„æ—¶å€™å°¤å…¶æœ‰ç”¨ã€‚

æˆ‘ä»¬è¿™é“é¢˜å°±ç”¨ä¸€ä¸ªåä¸º `left` çš„æ ˆä»£æ›¿ä¹‹å‰æ€è·¯ä¸­çš„ `left` å˜é‡ï¼Œ**é‡åˆ°å·¦æ‹¬å·å°±å…¥æ ˆï¼Œé‡åˆ°å³æ‹¬å·å°±å»æ ˆä¸­å¯»æ‰¾æœ€è¿‘çš„å·¦æ‹¬å·ï¼Œçœ‹æ˜¯å¦åŒ¹é…**ï¼š

```java
boolean isValid(String str) {
    Stack<Character> left = new Stack<>();
    for (char c : str.toCharArray()) {
        if (c == '(' || c == '{' || c == '[')
            left.push(c);
        else { // å­—ç¬¦ c æ˜¯å³æ‹¬å·
            if (!left.empty() && leftOf(c) == left.peek())
                left.pop();
            else
                // å’Œæœ€è¿‘çš„å·¦æ‹¬å·ä¸åŒ¹é…
                return false;
        }
    }
    // æ˜¯å¦æ‰€æœ‰çš„å·¦æ‹¬å·éƒ½è¢«åŒ¹é…äº†
    return left.empty();
}

char leftOf(char c) {
    if (c == '}') return '{';
    if (c == ')') return '(';
    return '[';
}
```



æ¥ä¸‹æ¥è®²å¦å¤–ä¸¤ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œå¦‚ä½•é€šè¿‡æœ€å°çš„æ’å…¥æ¬¡æ•°å°†æ‹¬å·å˜æˆæœ‰æ•ˆçš„ï¼Ÿ

## å¹³è¡¡æ‹¬å·ä¸²ï¼ˆä¸€ï¼‰

å…ˆæ¥ä¸ªç®€å•çš„ï¼ŒåŠ›æ‰£ç¬¬ 921 é¢˜ã€Œ[ä½¿æ‹¬å·æœ‰æ•ˆçš„æœ€å°‘æ·»åŠ open in new window](https://leetcode.cn/problems/minimum-add-to-make-parentheses-valid/)ã€ï¼š

ç»™ä½ è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­çš„ä»»æ„ä½ç½®æ’å…¥å·¦æ‹¬å· `(` æˆ–è€…å³æ‹¬å· `)`ï¼Œè¯·é—®ä½ æœ€å°‘éœ€è¦å‡ æ¬¡æ’å…¥æ‰èƒ½ä½¿å¾— `s` å˜æˆä¸€ä¸ªæœ‰æ•ˆçš„æ‹¬å·ä¸²ï¼Ÿ

æ¯”å¦‚è¯´è¾“å…¥ `s = "())("`ï¼Œç®—æ³•åº”è¯¥è¿”å› 2ï¼Œå› ä¸ºæˆ‘ä»¬è‡³å°‘éœ€è¦æ’å…¥ä¸¤æ¬¡æŠŠ `s` å˜æˆ `"(())()"`ï¼Œè¿™æ ·æ¯ä¸ªå·¦æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå³æ‹¬å·åŒ¹é…ï¼Œ`s` æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ‹¬å·ä¸²ã€‚

è¿™å…¶å®å’Œå‰æ–‡çš„åˆ¤æ–­æ‹¬å·æœ‰æ•ˆæ€§éå¸¸ç±»ä¼¼ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä»£ç ï¼š

```java
/**
 * ç»™å®šä¸€ä¸ªç”± '(' å’Œ ')' æ‹¬å·ç»„æˆçš„å­—ç¬¦ä¸² Sï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æœ€å°‘çš„æ‹¬å·ï¼ˆ '(' æˆ–æ˜¯ ')'ï¼Œå¯ä»¥åœ¨ä»»ä½•ä½ç½®ï¼‰ï¼Œä»¥ä½¿å¾—åˆ°çš„æ‹¬å·å­—ç¬¦ä¸²æœ‰æ•ˆã€‚
 * åœ¨å®Œæˆæ­¤é¢˜æ—¶ï¼Œä¿è¯è¾“å…¥å§‹ç»ˆæ˜¯æœ‰æ•ˆçš„ã€‚
 * 
 * ç¤ºä¾‹ï¼š
 * è¾“å…¥ï¼š"())"
 * è¾“å‡ºï¼š1
 */
public int minAddToMakeValid(String S) {
    // è®°å½•æ’å…¥æ¬¡æ•°
    int res = 0;
    // å˜é‡è®°å½•å³æ‹¬å·çš„éœ€æ±‚é‡
    int need = 0;

    for (int i = 0; i < S.length(); i++) {
        if (S.charAt(i) == '(') {
            // å¯¹å³æ‹¬å·çš„éœ€æ±‚ + 1
            need++;
        }

        if (S.charAt(i) == ')') {
            // å¯¹å³æ‹¬å·çš„éœ€æ±‚ - 1
            need--;

            if (need == -1) {
                need = 0;
                // éœ€æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·
                res++;
            }
        }
    }

    // æ’å…¥å‰©ä½™æ‰€éœ€çš„å³æ‹¬å·
    return res + need;
}
```

è¿™æ®µä»£ç å°±æ˜¯æœ€ç»ˆè§£æ³•ï¼Œ**æ ¸å¿ƒæ€è·¯æ˜¯ä»¥å·¦æ‹¬å·ä¸ºåŸºå‡†ï¼Œé€šè¿‡ç»´æŠ¤å¯¹å³æ‹¬å·çš„éœ€æ±‚æ•° `need`ï¼Œæ¥è®¡ç®—æœ€å°çš„æ’å…¥æ¬¡æ•°**ã€‚éœ€è¦æ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼š

**1ã€å½“ `need == -1` çš„æ—¶å€™æ„å‘³ç€ä»€ä¹ˆ**ï¼Ÿ

å› ä¸ºåªæœ‰é‡åˆ°å³æ‹¬å· `)` çš„æ—¶å€™æ‰ä¼š `need--`ï¼Œ`need == -1` æ„å‘³ç€å³æ‹¬å·å¤ªå¤šäº†ï¼Œæ‰€ä»¥éœ€è¦æ’å…¥å·¦æ‹¬å·ã€‚

æ¯”å¦‚è¯´ `s = "))"` è¿™ç§æƒ…å†µï¼Œéœ€è¦æ’å…¥ 2 ä¸ªå·¦æ‹¬å·ï¼Œä½¿å¾— `s` å˜æˆ `"()()"`ï¼Œæ‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ‹¬å·ä¸²ã€‚

**2ã€ç®—æ³•ä¸ºä»€ä¹ˆè¿”å› `res + need`**ï¼Ÿ

å› ä¸º `res` è®°å½•çš„å·¦æ‹¬å·çš„æ’å…¥æ¬¡æ•°ï¼Œ`need` è®°å½•äº†å³æ‹¬å·çš„éœ€æ±‚ï¼Œå½“ for å¾ªç¯ç»“æŸåï¼Œè‹¥ `need` ä¸ä¸º 0ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å³æ‹¬å·è¿˜ä¸å¤Ÿï¼Œéœ€è¦æ’å…¥ã€‚

æ¯”å¦‚è¯´ `s = "))("` è¿™ç§æƒ…å†µï¼Œæ’å…¥ 2 ä¸ªå·¦æ‹¬å·ä¹‹åï¼Œè¿˜è¦å†æ’å…¥ 1 ä¸ªå³æ‹¬å·ï¼Œä½¿å¾— `s` å˜æˆ `"()()()"`ï¼Œæ‰æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ‹¬å·ä¸²ã€‚

ä»¥ä¸Šå°±æ˜¯è¿™é“é¢˜çš„æ€è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€é“è¿›é˜¶é¢˜ç›®ï¼Œå¦‚æœå·¦å³æ‹¬å·ä¸æ˜¯ 1:1 é…å¯¹ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

## å¹³è¡¡æ‹¬å·ä¸²ï¼ˆäºŒï¼‰

è¿™æ˜¯åŠ›æ‰£ç¬¬ 1541 é¢˜ã€Œ[å¹³è¡¡æ‹¬å·å­—ç¬¦ä¸²çš„æœ€å°‘æ’å…¥æ¬¡æ•°](https://leetcode.cn/problems/minimum-insertions-to-balance-a-parentheses-string/)ã€ï¼š

ç°åœ¨å‡è®¾ 1 ä¸ªå·¦æ‹¬å·éœ€è¦åŒ¹é… 2 ä¸ªå³æ‹¬å·æ‰å«åšæœ‰æ•ˆçš„æ‹¬å·ç»„åˆï¼Œé‚£ä¹ˆç»™ä½ è¾“å…¥ä¸€ä¸ªæ‹¬å·ä¸² `s`ï¼Œè¯·é—®ä½ å¦‚ä½•è®¡ç®—ä½¿å¾— `s` æœ‰æ•ˆçš„æœ€å°æ’å…¥æ¬¡æ•°å‘¢ï¼Ÿ

**æ ¸å¿ƒæ€è·¯è¿˜æ˜¯å’Œåˆšæ‰ä¸€æ ·ï¼Œé€šè¿‡ä¸€ä¸ª `need` å˜é‡è®°å½•å¯¹å³æ‹¬å·çš„éœ€æ±‚æ•°ï¼Œæ ¹æ® `need` çš„å˜åŒ–æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ’å…¥**ã€‚

ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬æŒ‰ç…§åˆšæ‰çš„æ€è·¯æ­£ç¡®ç»´æŠ¤ `need` å˜é‡ï¼š

```java
int minInsertions(String s) {
    // need è®°å½•éœ€å³æ‹¬å·çš„éœ€æ±‚é‡
    int res = 0, need = 0;
    
    for (int i = 0; i < s.length(); i++) {
        // ä¸€ä¸ªå·¦æ‹¬å·å¯¹åº”ä¸¤ä¸ªå³æ‹¬å·
        if (s.charAt(i) == '(') {
            need += 2;
        }
        
        if (s.charAt(i) == ')') {
            need--;
        }
    }
    
    return res + need;
}
```

ç°åœ¨æƒ³ä¸€æƒ³ï¼Œå½“ `need` ä¸ºä»€ä¹ˆå€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šéœ€è¦è¿›è¡Œæ’å…¥ï¼Ÿ

**é¦–å…ˆï¼Œç±»ä¼¼ç¬¬ä¸€é¢˜ï¼Œå½“ `need == -1` æ—¶ï¼Œæ„å‘³ç€æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªå¤šä½™çš„å³æ‹¬å·ï¼Œæ˜¾ç„¶éœ€è¦æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·**ã€‚

æ¯”å¦‚è¯´å½“ `s = ")"`ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·è®© `s = "()"`ï¼Œä½†æ˜¯ç”±äºä¸€ä¸ªå·¦æ‹¬å·éœ€è¦ä¸¤ä¸ªå³æ‹¬å·ï¼Œæ‰€ä»¥å¯¹å³æ‹¬å·çš„éœ€æ±‚é‡å˜ä¸º 1ï¼š

```cpp
if (s[i] == ')') {
    need--;
    // è¯´æ˜å³æ‹¬å·å¤ªå¤šäº†
    if (need == -1) {
        // éœ€è¦æ’å…¥ä¸€ä¸ªå·¦æ‹¬å·
        res++;
        // åŒæ—¶ï¼Œå¯¹å³æ‹¬å·çš„éœ€æ±‚å˜ä¸º 1
        need = 1;
    }
}
```

**å¦å¤–ï¼Œå½“é‡åˆ°å·¦æ‹¬å·æ—¶ï¼Œè‹¥å¯¹å³æ‹¬å·çš„éœ€æ±‚é‡ä¸ºå¥‡æ•°ï¼Œéœ€è¦æ’å…¥ 1 ä¸ªå³æ‹¬å·**ã€‚å› ä¸ºä¸€ä¸ªå·¦æ‹¬å·éœ€è¦ä¸¤ä¸ªå³æ‹¬å·å˜›ï¼Œå³æ‹¬å·çš„éœ€æ±‚å¿…é¡»æ˜¯å¶æ•°ï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯æœ¬é¢˜çš„éš¾ç‚¹ã€‚

æ‰€ä»¥é‡åˆ°å·¦æ‹¬å·æ—¶è¦åšå¦‚ä¸‹åˆ¤æ–­ï¼š

```cpp
if (s[i] == '(') {
    need += 2;
    if (need % 2 == 1) {
        // æ’å…¥ä¸€ä¸ªå³æ‹¬å·
        res++;
        // å¯¹å³æ‹¬å·çš„éœ€æ±‚å‡ä¸€
        need--;
    }
}
```

ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæ­£ç¡®çš„ä»£ç ï¼š

```java
// æ³¨æ„ï¼šjava ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ cpp ä»£ç ç¿»è¯‘ï¼Œæ—¨åœ¨å¸®åŠ©ä¸åŒèƒŒæ™¯çš„è¯»è€…ç†è§£ç®—æ³•é€»è¾‘ã€‚
// æœ¬ä»£ç è¿˜æœªç»è¿‡åŠ›æ‰£æµ‹è¯•ï¼Œä»…ä¾›å‚è€ƒï¼Œå¦‚æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å‚ç…§æˆ‘å†™çš„ cpp ä»£ç å¯¹æ¯”æŸ¥çœ‹ã€‚

public int minInsertions(String s) {
    int res = 0, need = 0;

    for (int i = 0; i < s.length(); i++) {
        if (s.charAt(i) == '(') {
            need += 2;
            if (need % 2 == 1) {
                res++;
                need--;
            }
        }
        
        if (s.charAt(i) == ')') {
            need--;
            if (need == -1) {
                res++;
                need = 1;
            }
        }
    }
    
    return res + need;
}
```
